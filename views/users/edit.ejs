<% layout('layouts/boilerplate')%>
<div class="my-container">
    <form id="form" class="my-form" action="/users/<%=user._id%>?_method=PUT" method="POST" onSubmit="return registerFormValidation();">
        <h2 id="form-type">Edit Profile</h2>
        <div class="my-form-control">
            <label for="username"><i class="zmdi zmdi-account material-icons-name"></i> Username</label>
            <input type="text" id="username" name="user[username]" value="<%-user.username%>" readonly>
        </div>
        <div class="my-form-control">
            <label for="email"><i class="zmdi zmdi-email"></i> Email</label>
            <input type="text" id="email" name="user[email]" value="<%-user.email%>">
            <small>Error message</small>
        </div>
        <div class="my-form-control">
            <label for="mobile"><i class="zmdi zmdi-phone"></i> Mobile</label>
            <input type="number" id="mobile" name="user[mobile]" value="<%-user.mobile%>">
            <small>Error message</small>
        </div>
        <div class="my-form-control">
            <label for="image"><i class="zmdi zmdi-image"></i> Image</label>
            <input type="text" id="image" name="user[image]" value="<%-user.image%>">
            <small>Error message</small>
        </div>
        <div class="my-form-control">
            <label for="address"><i class="zmdi zmdi-home"></i> Delivery Address</label>
            <input type="text" id="address" name="user[address]" value="<%-user.address%>">
            <small>Error message</small>
        </div>

        <% if(currentUser && currentUser.profile === 'dealer') { %>
            <div class="my-form-control">
                <label for="storeLocation"><i class="zmdi zmdi-shopping-cart"></i> Store Location</label>
                <input type="text" id="storeLocation" name="user[storeLocation]" value="<%-user.storeLocation%>">
                <small>Error message</small>
            </div>
        <% } %>

        <div class="my-form-control">
            <div style="display: flex; justify-content:space-between;">
                <label for="profile"><i class="zmdi zmdi-settings"></i> Account Type</label>
                <select class="acc-select" name="user[profile]" id="profile">
                    <% if(currentUser.profile === 'dealer') { %>
                        <option class="acc-select" value="customer">Customer</option>
                        <option class="acc-select" value="dealer" selected>Dealer</option>
                    <% } else { %>
                        <option class="acc-select" value="customer" selected>Customer</option>
                        <option class="acc-select" value="dealer">Dealer</option>
                    <% } %>
                </select>
            </div>
        </div>

        <button id="submit" >Update</button>
    </form>
</div>